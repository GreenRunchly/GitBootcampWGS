exports.findText = findText;


function findText(element, numbering) {
    if (element.children && element.children.length) {
        findText(element.children[0], numbering);
    } else if (numbering.num) {
        setNumberingInfo(element, numbering);
    }
}

function setNumberingInfo(element, numbering) {
    var loText = getNumText(numbering);
    element.value = loText + ' ' + element.value;
}

function getNumText(numbering) {
    var num = numbering.num;
    var levelText = numbering.levelText;
    var numFont = numbering.numFont;

    var numText = num.toString();

    if (numFont.indexOf('chinese') !== -1) {
        numText = parseChinese(numText);
    }

    numText = levelText.replace(/%[0-9]*/i, numText);

    return numText;
}

function parseChinese(num) {
    var map = {
        '1': '一',
        '2': '二',
        '3': '三',
        '4': '四',
        '5': '五',
        '6': '六',
        '7': '七',
        '8': '八',
        '9': '九',
        '10': '十'
    };

    if (Number(num) <= 10) {
        return  map[num];
    }

    var str = '';
    var arr = num.split('');

    for (var i = 0; i < arr.length; i++) {
        var n = arr[i];
        if (n === '1' && i === 0) {
            str += map['10'];
        } else if (Number(n) > 1 && i === 0) {
            str += map[n] + map['10'];
        } else if (n === '0' && i === arr.length - 1) {
            // eslint-disable-next-line no-continue
            continue;
        } else {
            str += map[n];
        }
    }

    return str;
}

